\documentclass{article}

\usepackage{luacode}

% Configuration - all settings in one place
\begin{luacode*}
cfg = {
  paper_width = 24,        -- inches (swapped from yeargrid)
  paper_height = 36,       -- inches (swapped from yeargrid)
  margin = 0.8,            -- inches
  start_year = 2004,       -- first year row
  num_years = 22,          -- how many years (rows)
}
\end{luacode*}

\usepackage[
  paperwidth=\directlua{tex.print(cfg.paper_width)}in,
  paperheight=\directlua{tex.print(cfg.paper_height)}in,
  margin=\directlua{tex.print(cfg.margin)}in,
% Use showframe to show the margin space
% showframe
]{geometry}

\usepackage{tikz}

\setlength{\parindent}{0pt}
\setlength{\parskip}{0pt}
\setlength{\topskip}{0pt}

\begin{document}
\vspace*{0pt}
\thispagestyle{empty}
\begin{luacode*}
local gridlib = require("gridlib")

-- Generate labels (months on top, years on left)
local top_labels = gridlib.month_names
local left_labels = gridlib.number_range(cfg.start_year, cfg.num_years)

-- Get grid dimensions from TeX (set by geometry package)
local paper_width, paper_height, grid_width, grid_height = gridlib.get_page_dimensions()

-- Reduce height slightly to prevent overflow to second page
grid_height = grid_height - 0.05

-- Draw the grid using TikZ
gridlib.draw_grid_rowbox(grid_width, grid_height, top_labels, left_labels, {
  top_font_size = [[\Huge]],
  left_font_size = [[\Huge]],
  left_margin = cfg.left_margin,
  header_height = cfg.header_height,
  gap = cfg.gap,
  line_width = cfg.line_width,
})

-- Print the pdfcrop command for test printing
gridlib.print_crop_command("yeargrid.pdf", paper_width, paper_height)
\end{luacode*}

\end{document}
